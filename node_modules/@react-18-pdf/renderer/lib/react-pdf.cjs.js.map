{"version":3,"file":"react-pdf.cjs.js","sources":["../src/utils/propsEqual.js","../src/renderer.js","../src/index.js","../src/node/renderToFile.js","../src/node/renderToStream.js","../src/node/renderToString.js","../src/node/index.js"],"sourcesContent":["/* eslint-disable no-continue */\n\n/**\n * Checks if two sets of props are equal (recursively)\n *\n * @param {Object} props A\n * @param {Object} props B\n * @returns {Boolean} props equals?\n *\n */\nconst propsEqual = (a, b) => {\n  const oldPropsKeys = Object.keys(a);\n  const newPropsKeys = Object.keys(b);\n\n  if (oldPropsKeys.length !== newPropsKeys.length) {\n    return false;\n  }\n\n  for (let i = 0; i < oldPropsKeys.length; i += 1) {\n    const propName = oldPropsKeys[i];\n\n    if (propName === 'render' && !a[propName] !== !b[propName]) {\n      return false;\n    }\n\n    if (propName !== 'children' && a[propName] !== b[propName]) {\n      if (\n        typeof a[propName] === 'object' &&\n        typeof b[propName] === 'object' &&\n        propsEqual(a[propName], b[propName])\n      ) {\n        continue;\n      }\n\n      return false;\n    }\n\n    if (\n      propName === 'children' &&\n      (typeof a[propName] === 'string' || typeof b[propName] === 'string')\n    ) {\n      return a[propName] === b[propName];\n    }\n  }\n\n  return true;\n};\n\nexport default propsEqual;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable no-param-reassign */\n\nimport ReactFiberReconciler from 'react-reconciler';\nimport {\n  unstable_scheduleCallback as schedulePassiveEffects,\n  unstable_cancelCallback as cancelPassiveEffects,\n} from 'scheduler';\n\nimport propsEqual from './utils/propsEqual';\n\nconst emptyObject = {};\n\nconst createRenderer = ({ onChange = () => {} }) => {\n  return ReactFiberReconciler({\n    schedulePassiveEffects,\n\n    cancelPassiveEffects,\n\n    supportsMutation: true,\n\n    isPrimaryRenderer: false,\n\n    warnsIfNotActing: false,\n\n    appendInitialChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n\n    createInstance(type, { style, children, ...props }) {\n      return {\n        type,\n        box: {},\n        style: style || {},\n        props: props || {},\n        children: [],\n      };\n    },\n\n    createTextInstance(text, rootContainerInstance) {\n      return { type: 'TEXT_INSTANCE', value: text };\n    },\n\n    finalizeInitialChildren(element, type, props) {\n      return false;\n    },\n\n    getPublicInstance(instance) {\n      return instance;\n    },\n\n    prepareForCommit() {\n      // Noop\n    },\n\n    clearContainer() {\n      // Noop\n    },\n\n    prepareUpdate(element, type, oldProps, newProps) {\n      return !propsEqual(oldProps, newProps);\n    },\n\n    resetAfterCommit: onChange,\n\n    resetTextContent(element) {\n      // Noop\n    },\n\n    getRootHostContext() {\n      return emptyObject;\n    },\n\n    getChildHostContext() {\n      return emptyObject;\n    },\n\n    shouldSetTextContent(type, props) {\n      return false;\n    },\n\n    now: Date.now,\n\n    useSyncScheduling: true,\n\n    appendChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n\n    appendChildToContainer(parentInstance, child) {\n      if (parentInstance.type === 'ROOT') {\n        parentInstance.document = child;\n      } else {\n        parentInstance.children.push(child);\n      }\n    },\n\n    insertBefore(parentInstance, child, beforeChild) {\n      const index = parentInstance.children?.indexOf(beforeChild);\n\n      if (index === undefined) return;\n\n      if (index !== -1 && child)\n        parentInstance.children.splice(index, 0, child);\n    },\n\n    removeChild(parentInstance, child) {\n      const index = parentInstance.children?.indexOf(child);\n\n      if (index === undefined) return;\n\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n\n    removeChildFromContainer(parentInstance, child) {\n      const index = parentInstance.children?.indexOf(child);\n\n      if (index === undefined) return;\n\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n\n    commitTextUpdate(textInstance, oldText, newText) {\n      textInstance.value = newText;\n    },\n\n    commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n      const { style, ...props } = newProps;\n      instance.props = props;\n      instance.style = style;\n    },\n  });\n};\n\nexport default createRenderer;\n","import BlobStream from 'blob-stream';\nimport FontStore from '@react-18-pdf/font';\nimport renderPDF from '@react-18-pdf/render';\nimport PDFDocument from '@react-18-pdf/pdfkit';\nimport layoutDocument from '@react-18-pdf/layout';\n\nimport createRenderer from './renderer';\nimport { version } from '../package.json';\n\nconst fontStore = new FontStore();\n\n// We must keep a single renderer instance, otherwise React will complain\nlet renderer;\n\n// The pdf instance acts as an event emitter for DOM usage.\n// We only want to trigger an update when PDF content changes\nconst events = {};\n\nconst pdf = initialValue => {\n  const onChange = () => {\n    const listeners = events.change?.slice() || [];\n    for (let i = 0; i < listeners.length; i += 1) listeners[i]();\n  };\n\n  const container = { type: 'ROOT', document: null };\n  renderer = renderer || createRenderer({ onChange });\n  const mountNode = renderer.createContainer(container);\n\n  const updateContainer = doc => {\n    renderer.updateContainer(doc, mountNode, null);\n  };\n\n  if (initialValue) updateContainer(initialValue);\n\n  const render = async (compress = true) => {\n    const props = container.document.props || {};\n    const { pdfVersion, language, pageLayout, pageMode } = props;\n\n    const ctx = new PDFDocument({\n      compress,\n      pdfVersion,\n      lang: language,\n      displayTitle: true,\n      autoFirstPage: false,\n      pageLayout,\n      pageMode,\n    });\n\n    const layout = await layoutDocument(container.document, fontStore);\n\n    return renderPDF(ctx, layout);\n  };\n\n  const callOnRender = (params = {}) => {\n    if (container.document.props.onRender) {\n      container.document.props.onRender(params);\n    }\n  };\n\n  const toBlob = async () => {\n    const instance = await render();\n    const stream = instance.pipe(BlobStream());\n\n    return new Promise((resolve, reject) => {\n      stream.on('finish', () => {\n        try {\n          const blob = stream.toBlob('application/pdf');\n          callOnRender({ blob });\n          resolve(blob);\n        } catch (error) {\n          reject(error);\n        }\n      });\n\n      stream.on('error', reject);\n    });\n  };\n\n  const toBuffer = async () => {\n    callOnRender();\n    return render();\n  };\n\n  const toString = async () => {\n    let result = '';\n    const instance = await render(false); // For some reason, when rendering to string if compress=true the document is blank\n\n    return new Promise((resolve, reject) => {\n      try {\n        instance.on('data', buffer => {\n          result += buffer;\n        });\n\n        instance.on('end', () => {\n          callOnRender();\n          resolve(result);\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  const on = (event, listener) => {\n    if (!events[event]) events[event] = [];\n    events[event].push(listener);\n  };\n\n  const removeListener = (event, listener) => {\n    if (!events[event]) return;\n    const idx = events[event].indexOf(listener);\n    if (idx > -1) events[event].splice(idx, 1);\n  };\n\n  return {\n    on,\n    container,\n    toBlob,\n    toBuffer,\n    toString,\n    removeListener,\n    updateContainer,\n  };\n};\n\nconst Font = fontStore;\n\nconst StyleSheet = {\n  create: s => s,\n};\n\nexport { version, Font, StyleSheet, pdf, createRenderer };\n","import fs from 'fs';\n\nimport { pdf } from '../index';\n\nexport const renderToFile = async (element, filePath, callback) => {\n  const instance = pdf(element);\n  const output = await instance.toBuffer();\n  const stream = fs.createWriteStream(filePath);\n\n  output.pipe(stream);\n\n  return new Promise((resolve, reject) => {\n    stream.on('finish', () => {\n      if (callback) callback(output, filePath);\n      resolve(output);\n    });\n    stream.on('error', reject);\n  });\n};\n\nexport default renderToFile;\n","import { pdf } from '../index';\n\nexport const renderToStream = async element => {\n  const instance = pdf(element);\n  const buffer = await instance.toBuffer();\n  return buffer;\n};\n\nexport default renderToStream;\n","import { pdf } from '../index';\n\nexport const renderToString = element => {\n  const instance = pdf(element);\n  return instance.toString();\n};\n\nexport default renderToString;\n","import * as primitives from '@react-18-pdf/primitives';\n\nimport renderToFile from './renderToFile';\nimport renderToStream from './renderToStream';\nimport renderToString from './renderToString';\nimport { pdf, version, Font, StyleSheet } from '../index';\n\nconst throwEnvironmentError = name => {\n  throw new Error(\n    `${name} is a web specific API. You're either using this component on Node, or your bundler is not loading react-pdf from the appropriate web build.`,\n  );\n};\n\nexport const usePDF = () => {\n  throwEnvironmentError('usePDF');\n};\n\nexport const PDFViewer = () => {\n  throwEnvironmentError('PDFViewer');\n};\n\nexport const PDFDownloadLink = () => {\n  throwEnvironmentError('PDFDownloadLink');\n};\n\nexport const BlobProvider = () => {\n  throwEnvironmentError('BlobProvider');\n};\n\nexport const render = renderToFile;\n\nexport * from '../index';\n\nexport * from './renderToFile';\n\nexport * from './renderToStream';\n\nexport * from './renderToString';\n\nexport * from '@react-18-pdf/primitives';\n\nexport default {\n  pdf,\n  Font,\n  version,\n  StyleSheet,\n  usePDF,\n  PDFViewer,\n  BlobProvider,\n  PDFDownloadLink,\n  renderToStream,\n  renderToString,\n  renderToFile,\n  render,\n  ...primitives,\n};\n"],"names":["propsEqual","a","b","oldPropsKeys","Object","keys","newPropsKeys","length","i","propName","emptyObject","createRenderer","onChange","ReactFiberReconciler","schedulePassiveEffects","cancelPassiveEffects","supportsMutation","isPrimaryRenderer","warnsIfNotActing","appendInitialChild","parentInstance","child","children","push","createInstance","type","style","props","box","createTextInstance","text","rootContainerInstance","value","finalizeInitialChildren","element","getPublicInstance","instance","prepareForCommit","clearContainer","prepareUpdate","oldProps","newProps","resetAfterCommit","resetTextContent","getRootHostContext","getChildHostContext","shouldSetTextContent","now","Date","useSyncScheduling","appendChild","appendChildToContainer","document","insertBefore","beforeChild","index","indexOf","undefined","splice","removeChild","removeChildFromContainer","commitTextUpdate","textInstance","oldText","newText","commitUpdate","updatePayload","fontStore","FontStore","renderer","events","pdf","initialValue","listeners","change","slice","container","mountNode","createContainer","updateContainer","doc","render","compress","pdfVersion","language","pageLayout","pageMode","ctx","PDFDocument","lang","displayTitle","autoFirstPage","layout","layoutDocument","renderPDF","callOnRender","params","onRender","toBlob","stream","pipe","BlobStream","Promise","resolve","reject","on","blob","error","toBuffer","toString","result","buffer","event","listener","removeListener","idx","Font","StyleSheet","create","s","renderToFile","filePath","callback","output","fs","createWriteStream","renderToStream","renderToString","throwEnvironmentError","name","Error","usePDF","PDFViewer","PDFDownloadLink","BlobProvider","version","primitives"],"mappings":"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"}